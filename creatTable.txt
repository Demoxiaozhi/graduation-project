drop table if exists attention;
create table attention
(
   attention_id         int not null auto_increment,
   user_id              int not null,
   suser_id             int not null,
   attention_time       datetime not null,
   primary key (attention_id)
);
alter table attention add foreign key (user_id)
      references user (user_id) on delete restrict on update restrict;
alter table attention add foreign key (suser_id)
      references user (user_id) on delete restrict on update restrict;



drop table if exists dish;
create table dish
(
   dish_id              int not null auto_increment,
   menu_type_id         int not null,
   user_id              int not null,
   dish_name            varchar(20) not null,
   dish_photo           varchar(30) not null,
   dish_time            varchar(5) not null,
   ready_time           varchar(5) not null,
   p_count              int not null,
   story                text not null,
   publish_time         datetime not null,
   right_month          varchar(5) not null,
   video                varchar(30),
   primary key (dish_id)
);
alter table dish add foreign key (menu_type_id)
      references menu_type (id) on delete restrict on update restrict;

alter table dish add foreign key (user_id)
      references user (user_id) on delete restrict on update restrict;


drop table if exists dish_click;
create table dish_click
(
   dish_click_id        int not null auto_increment,
   dish_id              int not null,
   primary key (dish_click_id)
);
alter table dish_click add foreign key (dish_id)
      references dish (dish_id) on delete restrict on update restrict;



drop table if exists dish_collect;
create table dish_collect
(
   dish_collect_id      int not null auto_increment,
   user_id              int not null,
   dish_id              int not null,
   primary key (dish_collect_id)
);
alter table dish_collect add foreign key (user_id)
      references user (user_id) on delete restrict on update restrict;
alter table dish_collect add foreign key (dish_id)
      references dish (dish_id) on delete restrict on update restrict;



drop table if exists dish_comment;
create table dish_comment
(
   dish_comment_id      int not null auto_increment,
   user_id              int not null,
   dish_id              int not null,
   suser_id             int not null,
   comment_content      text not null,
   primary key (dish_comment_id)
);
alter table dish_comment add foreign key (user_id)
      references user (user_id) on delete restrict on update restrict;
alter table dish_comment add foreign key (dish_id)
      references dish (dish_id) on delete restrict on update restrict;
alter table dish_comment add foreign key (suser_id)
      references user (user_id) on delete restrict on update restrict;


drop table if exists fv;
create table fv
(
   fv_id                int not null auto_increment,
   fv_type_id           int not null,
   fv_photo             varchar(30) not null,
   fv_name              varchar(20) not null,
   fv_sname             varchar(20) not null,
   right_person         text not null,
   no_person            text not null,
   fv_effect            text not null,
   primary key (fv_id)
);
alter table fv add foreign key (fv_type_id)
      references fv_type (fv_type_id) on delete restrict on update restrict;


drop table if exists fv_type;
create table fv_type
(
   fv_type_id           int not null auto_increment,
   fv_type_name         varchar(30) not null,
   primary key (fv_type_id)
);



drop table if exists main_ing;
create table main_ing
(
   main_id              int not null auto_increment,
   dish_id              int not null,
   main_name            varchar(20) not null,
   main_count           varchar(20) not null,
   primary key (main_id)
);
alter table main_ing add foreign key (dish_id)
      references dish (dish_id) on delete restrict on update restrict;



drop table if exists menu_type;
create table menu_type
(
   id                   int not null auto_increment,
   name                 varchar(20) not null,
   primary key (id)
);



drop table if exists second_ing;
create table second_ing
(
   second_id            int not null auto_increment,
   dish_id              int not null,
   second_name          varchar(20) not null,
   second_count         varchar(20) not null,
   primary key (second_id)
);
alter table second_ing add foreign key (dish_id)
      references dish (dish_id) on delete restrict on update restrict;



drop table if exists sex_type;
create table sex_type
(
   id                   int not null,
   name                 varchar(2) not null,
   primary key (id)
);


drop table if exists step;
create table step
(
   step_id              int not null auto_increment,
   dish_id              int not null,
   step_photo           varchar(30) not null,
   step_content         text not null,
   primary key (step_id)
);
alter table step add foreign key (dish_id)
      references dish (dish_id) on delete restrict on update restrict;


drop table if exists topic;
create table topic
(
   topic_id             int not null auto_increment,
   user_id              int not null,
   topic_type_id        int not null,
   topic_name           varchar(100) not null,
   topic_content        text not null,
   topic_photo          varchar(30) not null,
   topic_publish_time   datetime not null,
   primary key (topic_id)
);
alter table topic add foreign key (user_id)
      references user (user_id) on delete restrict on update restrict;
alter table topic add foreign key (topic_type_id)
      references topic_type (topic_type_id) on delete restrict on update restrict;



drop table if exists topic_click;
create table topic_click
(
   topic_click_id       int not null auto_increment,
   topic_id             int not null,
   primary key (topic_click_id)
);
alter table topic_click add foreign key (topic_id)
      references topic (topic_id) on delete restrict on update restrict;



drop table if exists topic_collect;
create table topic_collect
(
   topic_collect_id     int not null auto_increment,
   user_id              int not null,
   topic_id             int not null,
   primary key (topic_collect_id)
);
alter table topic_collect add foreign key (user_id)
      references user (user_id) on delete restrict on update restrict;
alter table topic_collect add foreign key (topic_id)
      references topic (topic_id) on delete restrict on update restrict;




drop table if exists topic_comment;
create table topic_comment
(
   topic_comment_id     int not null auto_increment,
   user_id              int not null,
   topic_id             int not null,
   suser_id             int not null,
   commment_content     text not null,
   primary key (topic_comment_id)
);
alter table topic_comment add foreign key (user_id)
      references user (user_id) on delete restrict on update restrict;
alter table topic_comment add foreign key (topic_id)
      references topic (topic_id) on delete restrict on update restrict;
alter table topic_comment add foreign key (suser_id)
      references user (user_id) on delete restrict on update restrict;




drop table if exists topic_type;
create table topic_type
(
   topic_type_id        int not null auto_increment,
   topic_type_name      varchar(20) not null,
   primary key (topic_type_id)
);


drop table if exists user;
create table user
(
   user_id              int not null auto_increment,
   user_name            varchar(20) not null,
   password             varchar(20) not null,
   user_sname           varchar(20) not null,
   sex                  int not null,
   birthday             date not null,
   province             varchar(20) not null,
   city                 varchar(20) not null,
   sign                 text not null,
   head_photo           varchar(30) not null,
   regist_time          datetime not null,
   primary key (user_id)
);
alter table user add foreign key (sex)
      references sex_type (id) on delete restrict on update restrict;










